BUILDING

The ant build.xml requires a build.properties file that must be created with the
following properties, set appropriately for your environment.

	idea.dir=$IDEA_HOME
	plugin.dir=$HOME/config/plugins
	jdk.dir=$JAVA_HOME

With these properties set appropriately, the "all" target will build and install the
plugin, which will be active after restarting intellij (but see the LOGGING section
below before restarting).

The plugin.dir is separated out as plugins may be installed on a per-user basis
in their local configuration directories.

LOGGING

IntelliJ uses log4j internally for which is rather convenient for logging
things from plugins under development!

Logging is configured in $IDEA_HOME/bin/log.xml using the log4j xml configuration.
Log files are written to the IntelliJ $SYSTEM_DIR/log/idea.log[.n]

The $IDEA_HOME/bin/idea.lax file might indicate where the SYSTEM_DIR is.

Adding the following to the log.xml configuration file will configure log4j to log
messages from the xfiles plugin to the xfiles.log file in the system log dir.

	<appender name="XFILES" class="org.apache.log4j.RollingFileAppender">
		<param name="MaxFileSize" value="1Mb"/>
		<param name="MaxBackupIndex" value="3"/>
		<param name="file" value="$SYSTEM_DIR$/log/xfiles.log"/>
		<layout class="org.apache.log4j.PatternLayout">
			<param name="ConversionPattern" value="%d %-5p %t %c %m%n"/>
		</layout>
	</appender>

	<category name=="com.echologic.xfiles" >
		<appender-ref ref="XFILES"/>
		<priority value="DEBUG"/>
	</category>

On my setup, the log4j.xml configuration seems to use ' \n' to end message lines
but this looks like a bug. Standard log4j configuration uses %n to issue a platform
specific line ending. Also, the PatternLayout above is different than the one
intellij's configuration uses. Set it to something that makes you happy.

TODO

- show files by status
- show files matching pattern/glob
- little endian sort by camel case class names
- indicate open/closed files
- allow for file open/close
- allow for one row of tabs (to be basically ignored)
- open files tab
- selected files tab

QUESTIONS

- it would be nice to be able to put a drop down list in the main toobar for currenly open files
  and also to select various configured filters in the toolbar panel but the current toolbar
  and action stuff doesn't seem to provide anything but buttons

BUGS

 - at the moment we seem to have something that breaks closing files... i.e. ctrl-f4
   doesn't work and right-click close only works on files other than the active file


Cheers,

Derek
